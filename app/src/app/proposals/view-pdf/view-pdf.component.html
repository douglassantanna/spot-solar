<div style="display: flex;padding: 10px;">
  <button *ngIf="!isLoading;else loading" style="width: 100%; padding: 10px;" mat-raised-button type="button"
    color="primary" (click)="printPDF()">
    <mat-icon>download</mat-icon>
    Baixar proposta
  </button>
</div>
<div #content class="content">
  <header>
    <img src="assets/logo-spot-solar.png" alt="Logo SpotSolar">
  </header>
  <h2 class="title">Proposta Comercial nº {{proposal.rowKey}}</h2>
  <main>
    <table>
      <tr>
        <th>Dados da cliente</th>
        <th></th>
      </tr>
      <tr>
        <td>Nome</td>
        <td> {{proposal.customerFullName}}</td>
      </tr>
      <tr>
        <td>E-mail</td>
        <td> {{proposal.customerEmail}}</td>
      </tr>
      <tr>
        <td>Endereço</td>
        <td>{{proposal.street}}, {{proposal.neighborhood}}, {{proposal.city}} -
          {{proposal.state}}</td>
      </tr>
    </table>
    <table>
      <tr>
        <th>Dados da instalação</th>
        <th></th>
      </tr>
      <tr>
        <td>Tipo de serviço</td>
        <td>{{proposal.serviceType === 1 ? 'Instalação elétrica'
          : proposal.serviceType === 2 ? 'Instalação fotovoltaica'
          : proposal.serviceType === 3 ? 'Manutenção elétrica'
          : 'Manutenção fotovoltaica'}}</td>
      </tr>
      <tr *ngIf="proposal.power">
        <td>Potência do sistema</td>
        <td>{{proposal.power}} kWp</td>
      </tr>
      <tr>
        <td>Prazo de execução</td>
        <td>{{proposal.excecutionTime}} dias</td>
      </tr>
      <tr>
        <td>Garantia do serviço</td>
        <td>{{proposal.warrantyQtd}} {{proposal.warrantyType == 1 ? 'meses' :
          'anos'}}</td>
      </tr>
    </table>
    <table>
      <tr>
        <th>Produto</th>
        <th>Quantidade</th>
      </tr>
      <tr *ngFor="let element of proposal.products">
        <td>{{ element.name }}</td>
        <td>{{ element.quantity }}</td>
      </tr>
    </table>
    <table>
      <tr>
        <th>Valores</th>
        <th></th>
      </tr>
      <tr>
        <td>Forma de pagamento</td>
        <td>{{ proposal.paymentMethods}}</td>
      </tr>
      <tr>
        <td>Produtos</td>
        <td>{{ proposal.totalPriceProducts | currency}}</td>
      </tr>
      <tr>
        <td>Mão de obra</td>
        <td>{{ proposal.labourValue | currency}}</td>
      </tr>
      <tr>
        <td>Total</td>
        <td>{{ proposal.totalPrice | currency }}</td>
      </tr>
    </table>

    <span>Caso tenha alguma dúvida ou precise de mais informações, por favor, entre em contato conosco.</span>
    <span>Jundiaí, {{ proposal.createdAt | date:'dd' }} de {{ proposal.createdAt | date:'MMMM' }} de
      {{ proposal.createdAt | date:'yyyy' }}.</span>
    <div>
      <p>Atenciosamente,</p>
      <p>SpotSolar</p>
    </div>
  </main>
  <footer>
    <span>SpotSolar - Energia Solar</span>
    <span>Rua São José dos Campos, 426 - vila Ruy Barbosa, Jundiaí - SP, 13219-110</span>
    <span>Telefone: (11) 98299-5061</span>
    <span>E-mail: joaogomes3759@gmail.com</span>
  </footer>
</div>
<ng-template #loading>
  <button mat-raised-button type="button" style="width: 100%; padding: 10px;" color="primary">
    <mat-spinner color="accent" [diameter]="20"></mat-spinner>
  </button>
</ng-template>